"""
# Profiler: A Facets component tool. #

Perspective:

- Profiler

Component Tools:

- FileBrowser
- ProfileViewer
- UniversalInspector

Supported Features:

- DebugFeature
- DragDropFeature
- DropFileFeature
- OptionsFeature
- SaveStateFeature

Generated by:

- facets.extra.tools.tools

Date/Time:

- Monday, June 20, 2011 at 02:57:43 PM
"""

#-------------------------------------------------------------------------------
#  Imports:
#-------------------------------------------------------------------------------

from cPickle \
    import loads

from facets.api \
    import HasPrivateFacets, List, Any, Instance, View, Item, NotebookEditor

from facets.extra.helper.generated_tool \
    import Connection

from facets.extra.tools.file_browser \
    import FileBrowser

from facets.extra.tools.profile_viewer \
    import ProfileViewer

from facets.extra.tools.universal_inspector \
    import UniversalInspector

from facets.extra.features.debug_feature \
    import DebugFeature

from facets.extra.features.drag_drop_feature \
    import DragDropFeature

from facets.extra.features.drop_file_feature \
    import DropFileFeature

from facets.extra.features.options_feature \
    import OptionsFeature

from facets.extra.features.save_state_feature \
    import SaveStateFeature

#-------------------------------------------------------------------------------
#  'Profiler' class:
#-------------------------------------------------------------------------------

class Profiler ( HasPrivateFacets ):

    #-- Class Constants --------------------------------------------------------

    # The pickled string form of the layout template used by the tool contents:
    _template = "cfacets.core.facet_defs\n__newobj__\np1\n(cfacets.ui.dock.dock_section\nDockSection\np2\ntRp3\n(dp4\nS'splitters'\np5\nccopy_reg\n_reconstructor\np6\n(cfacets.core.facet_collections\nFacetListObject\np7\nc__builtin__\nlist\np8\n(ltRp9\n(dp10\nS'name_items'\np11\nS'splitters_items'\np12\nsS'object'\np13\ng3\nsS'name'\np14\ng5\nsbsS'selected'\np15\nI00\nsS'features'\np16\ng6\n(g7\ng8\n(ltRp17\n(dp18\ng11\nS'features_items'\np19\nsg13\ng3\nsg14\ng16\nsbsS'parent'\np20\nNsS'width'\np21\nI1366\nsS'feature_mode'\np22\nI-1\nsS'max_tab_length'\np23\nI30\nsS'bounds'\np24\n(I0\nI0\nI0\nI0\ntp25\nsS'drag_bounds'\np26\ng25\nsS'dock_window'\np27\nNsS'drop_features'\np28\ng6\n(g7\ng8\n(ltRp29\n(dp30\ng11\nS'drop_features_items'\np31\nsg13\ng3\nsg14\ng28\nsbsS'__facets_version__'\np32\nS'0.1'\np33\nsS'contents'\np34\ng6\n(g7\ng8\n(lp35\ng1\n(g2\ntRp36\n(dp37\ng5\ng6\n(g7\ng8\n(lp38\ng1\n(cfacets.ui.dock.dock_splitter\nDockSplitter\np39\ntRp40\n(dp41\nS'index'\np42\nI0\nsS'style'\np43\nS'horizontal'\np44\nsg15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp45\n(dp46\ng11\nS'features_items'\np47\nsg13\ng40\nsg14\ng16\nsbsg20\ng36\nsg21\nI-1\nsg22\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg28\ng6\n(g7\ng8\n(ltRp48\n(dp49\ng11\nS'drop_features_items'\np50\nsg13\ng40\nsg14\ng28\nsbsg32\ng33\nsS'height'\np51\nI-1\nsS'tab_state'\np52\nNsbatRp53\n(dp54\ng11\nS'splitters_items'\np55\nsg13\ng36\nsg14\ng5\nsbsg15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp56\n(dp57\ng11\nS'features_items'\np58\nsg13\ng36\nsg14\ng16\nsbsg20\ng3\nsg21\nI1366\nsg22\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg27\nNsg28\ng6\n(g7\ng8\n(ltRp59\n(dp60\ng11\nS'drop_features_items'\np61\nsg13\ng36\nsg14\ng28\nsbsg32\ng33\nsg34\ng6\n(g7\ng8\n(lp62\ng1\n(cfacets.ui.dock.dock_region\nDockRegion\np63\ntRp64\n(dp65\ng15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp66\n(dp67\ng11\nS'features_items'\np68\nsg13\ng64\nsg14\ng16\nsbsg20\ng36\nsg21\nI375\nsg22\nI-1\nsS'max_tab'\np69\nI0\nsS'tab_scroll_index'\np70\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg28\ng6\n(g7\ng8\n(ltRp71\n(dp72\ng11\nS'drop_features_items'\np73\nsg13\ng64\nsg14\ng28\nsbsg32\ng33\nsg34\ng6\n(g7\ng8\n(lp74\ng1\n(cfacets.ui.dock.dock_control\nDockControl\np75\ntRp76\n(dp77\nS'control'\np78\nNsg16\ng6\n(g7\ng8\n(ltRp79\n(dp80\ng11\nS'features_items'\np81\nsg13\ng76\nsg14\ng16\nsbsS'image'\np82\nNsg51\nI700\nsS'num_window_features'\np83\nI0\nsS'visible'\np84\nI01\nsS'export'\np85\nS''\nsS'id'\np86\nS'File Browser'\np87\nsS'num_global_features'\np88\nI0\nsg43\nS'tab'\np89\nsS'resizable'\np90\nI01\nsg22\nI-1\nsg15\nI00\nsg21\nI369\nsS'user_style'\np91\nI00\nsS'user_name'\np92\nI00\nsg32\ng33\nsg20\ng64\nsg26\ng25\nsS'on_close'\np93\nNsg52\nNsS'dockable'\np94\nNsS'locked'\np95\nI00\nsg14\ng87\nsg28\ng6\n(g7\ng8\n(ltRp96\n(dp97\ng11\nS'drop_features_items'\np98\nsg13\ng76\nsg14\ng28\nsbsg23\nI30\nsg24\ng25\nsS'closeable'\np99\nI00\nsbatRp100\n(dp101\ng11\nS'contents_items'\np102\nsg13\ng64\nsg14\ng34\nsbsS'active'\np103\nI0\nsg51\nI725\nsS'left_tab'\np104\nI0\nsg52\nNsbag1\n(g2\ntRp105\n(dp106\ng5\ng6\n(g7\ng8\n(lp107\ng1\n(g39\ntRp108\n(dp109\ng42\nI0\nsg43\ng44\nsg15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp110\n(dp111\ng11\nS'features_items'\np112\nsg13\ng108\nsg14\ng16\nsbsg20\ng105\nsg21\nI-1\nsg22\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg28\ng6\n(g7\ng8\n(ltRp113\n(dp114\ng11\nS'drop_features_items'\np115\nsg13\ng108\nsg14\ng28\nsbsg32\ng33\nsg51\nI-1\nsg52\nNsbatRp116\n(dp117\ng11\nS'splitters_items'\np118\nsg13\ng105\nsg14\ng5\nsbsg15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp119\n(dp120\ng11\nS'features_items'\np121\nsg13\ng105\nsg14\ng16\nsbsg20\ng36\nsg21\nI989\nsg22\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg27\nNsg28\ng6\n(g7\ng8\n(ltRp122\n(dp123\ng11\nS'drop_features_items'\np124\nsg13\ng105\nsg14\ng28\nsbsg32\ng33\nsg34\ng6\n(g7\ng8\n(lp125\ng1\n(g63\ntRp126\n(dp127\ng15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp128\n(dp129\ng11\nS'features_items'\np130\nsg13\ng126\nsg14\ng16\nsbsg20\ng105\nsg21\nI989\nsg22\nI-1\nsg69\nI0\nsg70\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg28\ng6\n(g7\ng8\n(ltRp131\n(dp132\ng11\nS'drop_features_items'\np133\nsg13\ng126\nsg14\ng28\nsbsg32\ng33\nsg34\ng6\n(g7\ng8\n(lp134\ng1\n(g75\ntRp135\n(dp136\ng78\nNsg16\ng6\n(g7\ng8\n(ltRp137\n(dp138\ng11\nS'features_items'\np139\nsg13\ng135\nsg14\ng16\nsbsg82\nNsg51\nI337\nsg83\nI0\nsg84\nI01\nsg85\nS''\nsg86\nS'Profile Viewer'\np140\nsg88\nI0\nsg43\ng89\nsg90\nI01\nsg22\nI-1\nsg15\nI00\nsg21\nI983\nsg91\nI00\nsg92\nI00\nsg32\ng33\nsg20\ng126\nsg26\ng25\nsg93\nNsg52\nNsg94\nNsg95\nI00\nsg14\ng140\nsg28\ng6\n(g7\ng8\n(ltRp141\n(dp142\ng11\nS'drop_features_items'\np143\nsg13\ng135\nsg14\ng28\nsbsg23\nI30\nsg24\ng25\nsg99\nI00\nsbatRp144\n(dp145\ng11\nS'contents_items'\np146\nsg13\ng126\nsg14\ng34\nsbsg103\nI0\nsg51\nI362\nsg104\nI0\nsg52\nNsbag1\n(g63\ntRp147\n(dp148\ng15\nI00\nsg16\ng6\n(g7\ng8\n(ltRp149\n(dp150\ng11\nS'features_items'\np151\nsg13\ng147\nsg14\ng16\nsbsg20\ng105\nsg21\nI989\nsg22\nI-1\nsg69\nI0\nsg70\nI-1\nsg23\nI30\nsg24\ng25\nsg26\ng25\nsg28\ng6\n(g7\ng8\n(ltRp152\n(dp153\ng11\nS'drop_features_items'\np154\nsg13\ng147\nsg14\ng28\nsbsg32\ng33\nsg34\ng6\n(g7\ng8\n(lp155\ng1\n(g75\ntRp156\n(dp157\ng78\nNsg16\ng6\n(g7\ng8\n(ltRp158\n(dp159\ng11\nS'features_items'\np160\nsg13\ng156\nsg14\ng16\nsbsg82\nNsg51\nI336\nsg83\nI0\nsg84\nI01\nsg85\nS''\nsg86\nS'Universal Inspector'\np161\nsg88\nI0\nsg43\ng89\nsg90\nI01\nsg22\nI-1\nsg15\nI00\nsg21\nI983\nsg91\nI00\nsg92\nI00\nsg32\ng33\nsg20\ng147\nsg26\ng25\nsg93\nNsg52\nNsg94\nNsg95\nI00\nsg14\ng161\nsg28\ng6\n(g7\ng8\n(ltRp162\n(dp163\ng11\nS'drop_features_items'\np164\nsg13\ng156\nsg14\ng28\nsbsg23\nI30\nsg24\ng25\nsg99\nI00\nsbatRp165\n(dp166\ng11\nS'contents_items'\np167\nsg13\ng147\nsg14\ng34\nsbsg103\nI0\nsg51\nI361\nsg104\nI0\nsg52\nNsbatRp168\n(dp169\ng11\nS'contents_items'\np170\nsg13\ng105\nsg14\ng34\nsbsg51\nI725\nsg52\nNsS'is_row'\np171\nI00\nsbatRp172\n(dp173\ng11\nS'contents_items'\np174\nsg13\ng36\nsg14\ng34\nsbsg51\nI725\nsg52\nNsg171\nI01\nsbatRp175\n(dp176\ng11\nS'contents_items'\np177\nsg13\ng3\nsg14\ng34\nsbsg51\nI725\nsg52\nNsg171\nI00\nsb."

    #-- Facet Definitions ------------------------------------------------------

    # The component tools:
    tool_1 = Instance( FileBrowser, () )
    tool_2 = Instance( ProfileViewer, () )
    tool_3 = Instance( UniversalInspector, () )

    # The list of all component tools:
    tools = List

    # The layout template for the tools:
    template = Any

    # The list of all inter-tool connections:
    connections = List

    #-- Facet View Definitions -------------------------------------------------

    def default_facets_view ( self ):
        """ Returns the View to use with this perspective.
        """
        return View(
            Item( 'tools',
                  style      = 'custom',
                  show_label = False,
                  id         = 'tools',
                  editor     = NotebookEditor(
                      features = [
                          DebugFeature,
                          DragDropFeature,
                          DropFileFeature,
                          OptionsFeature,
                          SaveStateFeature
                      ],
                      dock_style = 'tab',
                      page_name  = '.name',
                      template   = 'template'
                  )
            ),
            title     = 'Profiler Tool',
            id        = 'facets.extra.tools.tools.generated.Profiler',
            resizable = True,
            width     = 0.5,
            height    = 0.265
        )

    #-- HasFacets Method Overrides ---------------------------------------------

    def facets_init ( self ):
        """ Initializes all of the inter-tool connections.
        """
        self.tools = [
            self.tool_1,
            self.tool_2,
            self.tool_3
        ]
        self.connections = [
            Connection( connection = 'from',
                        object1    = self.tool_1,
                        name1      = 'file_position',
                        object2    = self.tool_2,
                        name2      = 'file_position'
            ),
            Connection( connection = 'from',
                        object1    = self.tool_2,
                        name1      = 'stats_position',
                        object2    = self.tool_3,
                        name2      = 'item'
            )
        ]

    #-- Facet Default Values ---------------------------------------------------

    def _template_default ( self ):
        return loads( self._template )

#-- Create the demo version of the tool ----------------------------------------

demo = Profiler

#-- Start the tool (if invoked from the command line) --------------------------

if __name__ == '__main__':
    demo().edit_facets()

#-- EOF ------------------------------------------------------------------------